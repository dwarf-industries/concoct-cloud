<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Essential Studio for JavaScript: Predictive Analytics - Audit Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="This sample demonstrates how a PMML model is evaluated to compute the audit risk for an individual.">
    <meta name="author" content="Syncfusion">
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="../../content/images/favicon.ico">
    <link href="../../content/bootstrap.min.css" rel="stylesheet" />
    <link href="../../content/ejthemes/default-theme/ej.web.all.min.css" rel="stylesheet" />
    <link href="../../content/default.css" rel="stylesheet" />
    <link href="themes/css/auditstyle.css" rel="stylesheet" />
    <link href="../../content/default-responsive.css" rel="stylesheet" />
    <!--[if lt IE 9]>
    <script src="../../scripts/jquery-1.11.3.min.js"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
    <script src="../../scripts/jquery-3.3.1.min.js"></script>
    <!--<![endif]-->
    <script src="../../scripts/jsrender.min.js"></script>
    <script src="../../scripts/ej.web.all.min.js" type="text/javascript"></script>
    <script src="../../scripts/properties.js" type="text/javascript"></script>    
</head>
<body>
    <div class="audithead">
        <img class="Logo" src="../../content/images/Icon.ico" />
		<h1 class="titleAudit">Audit Prediction</h1>
    </div>
    <div class="container">
        <div class="leftcontainer">
            <div class="titleDesc">
                        This dataset consists of fictional clients who have been audited. For each case an outcome is recorded (whether the taxpayer's claims had to be
                        adjusted or not).
            </div>
            <div class="LeftField">
                <div class="LabelDiv">Age</div>
                <input id="age" class="InputDiv" value="20" data-role="ejnumeric" type="number"/>
                <div class="LabelDiv">Gender</div>
                <div class="ControlDiv">
                    <input type="text" value="Male" id="gender" />
                    <div id="genderTypes">
                        <ul>
                            <li>Male</li>
                            <li>Female</li>
                        </ul>
                    </div>
                </div>                 
                <div class="LabelDiv">Marital</div>
                <div class="ControlDiv">
                    <input type="text" value="Absent" id="marital" />
                    <div id="maritalTypes">
                        <ul>
                            <li>Absent</li>
                            <li>Divorced</li>
                            <li>Married</li>
                            <li>Married-spouse-absent</li>
                            <li>Unmarried</li>
                            <li>Widowed</li>
                        </ul>
                    </div>
                </div> 
                <div class="LabelDiv">Education</div>
                <div class="ControlDiv">
                    <input id="education" type="text" value="Associate"/>
                    <div id="educationTypes">
                        <ul>
                            <li>Associate</li>
                            <li>Bachelor</li>
                            <li>College</li>
                            <li>Doctorate</li>
                            <li>HSgrad</li>
                            <li>Master</li>
                            <li>Preschool</li>
                            <li>Professional</li>
                            <li>Vocational</li>
                            <li>Yr9</li>
                            <li>Yr10</li>
                            <li>Yr11</li>
                            <li>Yr12</li>
                            <li>Yr1t4"</li>
                            <li>Yr5t6"</li>
                            <li>Yr7t8</li>
                        </ul>
                    </div>
                </div> 
                <div class="LabelDiv">Employment</div>
                <div class="ControlDiv">
                    <input type="text" value="Consultant" id="employment" />
                    <div id="employmentTypes">
                        <ul>
                            <li>Consultant</li>
                            <li>Private</li>
                            <li>PSFederal</li>
                            <li>PSLocal</li>
                            <li>PSState</li>
                            <li>SelfEmp</li>
                            <li>Volunteer</li>
                        </ul>
                    </div>
                </div> 
                

            </div>
            <div class="RightField">
                <div class="LabelDiv">Occupation</div>
                <div class="ControlDiv">
                    <input type="text" value="Cleaner" id="occupation" />
                    <div id="occupationTypes">
                        <ul>
                            <li>Cleaner</li>
                            <li>Clerical</li>
                            <li>Executive</li>
                            <li>Farming</li>
                            <li>Home</li>
                            <li>Machinist</li>
                            <li>Military</li>
                            <li>Professional</li>
                            <li>Protective</li>
                            <li>Repair</li>
                            <li>Sales</li>
                            <li>Service</li>
                            <li>Support</li>
                            <li>Transport</li>
                        </ul>
                    </div>                    
                </div>     
                <div class="LabelDiv">Hours</div>
                <input id="hours" class="InputDiv" value="12" data-role="ejnumeric" type="number" />
                <div class="LabelDiv">Income</div>
                <input id="income" class="InputDiv" value="20000" data-role="ejnumeric" type="number" />
                <div class="LabelDiv">Deduction</div>
                <input id="deduction" class="InputDiv" value="10000" data-role="ejnumeric" type="number" />
                <div class="LabelDiv">Account</div>
                <div class="ControlDiv">
                    <input type="text" value="Canada" id="account" />
                    <div id="accountTypes">
                        <ul>
                            <li>Canada</li>
                            <li>China</li>
                            <li>Columbia</li>
                            <li>Cuba</li>
                            <li>Ecuador</li>
                            <li>England</li>
                            <li>Fiji</li>
                            <li>Germany</li>
                            <li>Greece</li>
                            <li>Guatemala></li>
                            <li>Service</li>
                            <li>Hong</li>
                            <li>Hungary></li>
                            <li>India</li>
                            <li>Indonesia</li>
                            <li>Iran</li>
                            <li>Ireland</li>
                            <li>Italy</li>
                            <li>Jamaica</li>
                            <li>Japan</li>
                            <li>Malaysia</li>
                            <li>Mexico</li>
                            <li>NewZealand</li>
                            <li>Nicaragua</li>
                            <li>Philippines</li>
                            <li>Poland</li>
                            <li>Portugal</li>
                            <li>Scotland</li>
                            <li>Singapore</li>
                            <li>Taiwan</li>
                            <li>UnitedStates</li>
                            <li>Vietnam</li>
                            <li>Yugoslavia</li>
                        </ul>
                    </div>
                    
                </div>     
            </div>
            <input type="submit" onclick="predict()" value="Predict, if Tax Adjustable?" class="predictButton">
        </div>  
        <div id="rightcontainer" class="rightcontainer">
            <div class="outputresult">
                <div class="outputDesc">Predicted Result</div>
                <div class="hr"><hr></div>
                <div class="imageDiv">
                    <img id="auditImage" />
                </div>
                <div id="auditResult" class="YesorNo"></div>
                <div id="auditRisk" class="taxDesc"></div>
            </div>
        </div>
    </div>   

    <script type="text/javascript">    
        
        function predict() {
            var audit = new Object();
            audit.Age = $("#age").val();
            audit.Employment = $("#employment").val();
            audit.Education = $("#education").val();
            audit.Marital = $("#marital").val();
            audit.Occupation = $("#occupation").val();
            audit.Income = $("#income").val();
            audit.Sex = $("#gender").val();
            audit.Deductions = $("#deduction").val();
            audit.Hours = $("#hours").val();
            audit.Accounts = $("#account").val();

            $.ajax({
                type: "POST",
                url: window.baseurl + 'api/PredictiveAnalytics/Load',
				data: JSON.stringify({ data: audit, pmmlFile: 'Audit.pmml', name: 'AuditShowcase' }),
                contentType: "application/json; charset=utf-8", // content type sent to server
                dataType: "json", //Expected data format from server
                processdata: true, //True or False
                success: function (msg) {//On Successfull service call
                    ServiceSucceeded(msg);
                },
                error: ServiceFailed// When Service call fails
            });
        }

        function ServiceFailed(result) {
            alert('Service call failed: ' + result.status + '' + result.statusText);
        }

        function ServiceSucceeded(result) {
            var resultObject = JSON.parse(result);
            document.getElementById("auditImage").src = resultObject.ImageUrl;
            document.getElementById("auditResult").textContent = resultObject.PredictedResultText;
            document.getElementById("auditRisk").textContent = resultObject.AuditRiskStatus;
        }

        function ServiceFailed(xhr) {
            alert(xhr.responseText);
            if (xhr.responseText) {
                var err = xhr.responseText;
                if (err)
                    error(err);
                else
                    error({ Message: "Unknown server error." })
            } return;
        }        

        $(function () {          

            $('#occupation').ejDropDownList({
                targetID: "occupationTypes",
                text: "Cleaner",
                width: $('.InputDiv').outerWidth()
            });

            $('#account').ejDropDownList({
                targetID: "accountTypes",
                text: "Canada",
                width: $('.InputDiv').outerWidth()
            });

            $('#gender').ejDropDownList({
                targetID: "genderTypes",
                text: "Male",
                width: $('.InputDiv').outerWidth()
            });

            $('#marital').ejDropDownList({
                targetID: "maritalTypes",
                text: "Absent",
                width: $('.InputDiv').outerWidth()
            });

            $('#education').ejDropDownList({
                targetID: "educationTypes",
                text: "Associate",
                width: $('.InputDiv').outerWidth()
            });

            $('#employment').ejDropDownList({
                targetID: "employmentTypes",
                text: "Consultant",
                width: $('.InputDiv').outerWidth()
            });
        });
    </script>
</body>
</html>
